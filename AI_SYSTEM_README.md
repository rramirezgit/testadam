# SISTEMA DE INTELIGENCIA ARTIFICIAL
## DocumentaciÃ³n Completa del Sistema de IA

---

<div align="center">

**ğŸ¤– GeneraciÃ³n de Notas Â· âœï¸ EdiciÃ³n de Texto Â· ğŸ¨ GeneraciÃ³n de ImÃ¡genes**

*DocumentaciÃ³n creada el 2025-11-10*

</div>

---

## ğŸ“– BIENVENIDA

Este sistema integra **3 funcionalidades principales de IA** en el editor de newsletters:

1. **GeneraciÃ³n de Notas Completas** - Crear contenido desde cero con prompts
2. **EdiciÃ³n de Texto con IA (Magic Write)** - Mejorar, traducir y transformar texto
3. **GeneraciÃ³n de ImÃ¡genes con IA** - Crear imÃ¡genes personalizadas por descripciÃ³n

Este conjunto de documentos te proporciona **todo lo necesario** para entender, modificar y mantener el sistema.

---

## ğŸ—‚ï¸ DOCUMENTACIÃ“N DISPONIBLE

### ğŸ“š Para Entender el Sistema

#### 1. **AI_SYSTEM_INVENTORY.md** 
*Inventario Exhaustivo del Sistema*

- âœ… **Usa esto si:** Necesitas entender TODO el sistema en profundidad
- ğŸ“„ **Contenido:** DescripciÃ³n detallada de cada componente, tipos, stores, servicios
- ğŸ¯ **Ideal para:** Nuevos desarrolladores, onboarding, referencia completa
- ğŸ“ **ExtensiÃ³n:** ~800 lÃ­neas, lectura completa

[ğŸ‘‰ Abrir AI_SYSTEM_INVENTORY.md](./AI_SYSTEM_INVENTORY.md)

---

#### 2. **AI_SYSTEM_QUICK_REFERENCE.md**
*Referencia RÃ¡pida Visual*

- âœ… **Usa esto si:** Necesitas consultar algo rÃ¡pidamente durante desarrollo
- ğŸ“„ **Contenido:** Diagramas visuales, tablas comparativas, comandos Ãºtiles
- ğŸ¯ **Ideal para:** Desarrollo dÃ­a a dÃ­a, consultas rÃ¡pidas
- ğŸ“ **ExtensiÃ³n:** ~600 lÃ­neas, organizado por funcionalidad

[ğŸ‘‰ Abrir AI_SYSTEM_QUICK_REFERENCE.md](./AI_SYSTEM_QUICK_REFERENCE.md)

---

#### 3. **AI_ARCHITECTURE_MAP.md**
*Mapa de Arquitectura*

- âœ… **Usa esto si:** Necesitas entender cÃ³mo se conectan las piezas
- ğŸ“„ **Contenido:** Diagramas de capas, flujos de datos, dependencias
- ğŸ¯ **Ideal para:** DiseÃ±o de features, refactorizaciÃ³n, debugging
- ğŸ“ **ExtensiÃ³n:** ~500 lÃ­neas, altamente visual

[ğŸ‘‰ Abrir AI_ARCHITECTURE_MAP.md](./AI_ARCHITECTURE_MAP.md)

---

### ğŸ› ï¸ Para Hacer Cambios

#### 4. **AI_MIGRATION_CHECKLIST.md**
*Checklists para Cambios Masivos*

- âœ… **Usa esto si:** Vas a hacer cambios en mÃºltiples archivos
- ğŸ“„ **Contenido:** 7 checklists detallados para diferentes escenarios
- ğŸ¯ **Ideal para:** Migraciones, refactorizaciones, cambios en APIs
- ğŸ“ **ExtensiÃ³n:** ~800 lÃ­neas, paso a paso

**Escenarios incluidos:**
1. Cambiar estructura de request/response
2. Cambiar endpoints o URLs
3. Cambiar autenticaciÃ³n/autorizaciÃ³n
4. AÃ±adir nueva funcionalidad de IA
5. Optimizar polling
6. Migrar a nuevo backend
7. Refactorizar componentes UI

[ğŸ‘‰ Abrir AI_MIGRATION_CHECKLIST.md](./AI_MIGRATION_CHECKLIST.md)

---

#### 5. **AI_FILES_INDEX.md**
*Ãndice de Todos los Archivos*

- âœ… **Usa esto si:** Necesitas encontrar un archivo especÃ­fico rÃ¡pidamente
- ğŸ“„ **Contenido:** Lista de 31 archivos con descripciÃ³n de una lÃ­nea
- ğŸ¯ **Ideal para:** BÃºsqueda rÃ¡pida, navegaciÃ³n del codebase
- ğŸ“ **ExtensiÃ³n:** ~600 lÃ­neas, organizado por tipo

[ğŸ‘‰ Abrir AI_FILES_INDEX.md](./AI_FILES_INDEX.md)

---

### ğŸ“š DocumentaciÃ³n Existente (en `/docs`)

#### 6. **docs/AI_INTEGRATION_GUIDE.md**
*GuÃ­a de IntegraciÃ³n Original*

- Arquitectura frontend/backend
- Flujo de trabajo paso a paso
- Ejemplos de uso
- Troubleshooting

[ğŸ‘‰ Abrir docs/AI_INTEGRATION_GUIDE.md](./docs/AI_INTEGRATION_GUIDE.md)

---

#### 7. **docs/AI_DATA_STRUCTURE.md**
*Estructura de Datos de IA*

- Formato de `objData` y `objDataWeb`
- Estructura de componentes
- Ejemplos de respuestas del backend

[ğŸ‘‰ Abrir docs/AI_DATA_STRUCTURE.md](./docs/AI_DATA_STRUCTURE.md)

---

#### 8. **docs/IMPLEMENTATION_SUMMARY.md**
*Resumen de ImplementaciÃ³n*

- Resumen ejecutivo
- Decisiones arquitectÃ³nicas
- Estado de implementaciÃ³n

[ğŸ‘‰ Abrir docs/IMPLEMENTATION_SUMMARY.md](./docs/IMPLEMENTATION_SUMMARY.md)

---

#### 9. **docs/AI_HEADER_BUTTON_FLOW.md**
*Flujo del BotÃ³n de IA*

- Flujo especÃ­fico del botÃ³n en header
- Diagrama de interacciones

[ğŸ‘‰ Abrir docs/AI_HEADER_BUTTON_FLOW.md](./docs/AI_HEADER_BUTTON_FLOW.md)

---

## ğŸš€ INICIO RÃPIDO

### Si eres nuevo en el sistema:

**Paso 1:** Lee el resumen ejecutivo (5 min)
```
ğŸ‘‰ Lee la secciÃ³n "RESUMEN EJECUTIVO" mÃ¡s abajo en este documento
```

**Paso 2:** Explora el inventario completo (20-30 min)
```
ğŸ‘‰ Abre AI_SYSTEM_INVENTORY.md
```

**Paso 3:** Revisa los flujos visuales (10-15 min)
```
ğŸ‘‰ Abre AI_ARCHITECTURE_MAP.md
```

**Paso 4:** Ten a mano la referencia rÃ¡pida
```
ğŸ‘‰ MantÃ©n abierto AI_SYSTEM_QUICK_REFERENCE.md mientras desarrollas
```

---

### Si vas a hacer cambios:

**Paso 1:** Identifica el tipo de cambio
```
- Â¿Cambiar estructura de datos?
- Â¿Cambiar endpoints?
- Â¿AÃ±adir nueva funcionalidad?
- Â¿Refactorizar UI?
```

**Paso 2:** Abre el checklist correspondiente
```
ğŸ‘‰ Abre AI_MIGRATION_CHECKLIST.md
ğŸ‘‰ Busca el checklist para tu caso
```

**Paso 3:** Identifica archivos a modificar
```
ğŸ‘‰ Usa AI_FILES_INDEX.md para encontrar archivos rÃ¡pidamente
```

**Paso 4:** Sigue el checklist paso a paso
```
âœ… Marca cada checkbox a medida que completas
```

---

## ğŸ“Š RESUMEN EJECUTIVO

### El Sistema en 3 Minutos

El sistema de IA consta de **3 capas principales**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPA UI (React Components)         â”‚  13 componentes
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CAPA ESTADO (Zustand Stores)       â”‚   3 stores
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CAPA SERVICIO (Logic + HTTP)       â”‚   1 servicio + axios
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND APIs                        â”‚   3 grupos de endpoints
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Las 3 Funcionalidades

#### 1ï¸âƒ£ GeneraciÃ³n de Notas
```
Usuario â†’ AINoteModal â†’ AiGenerationStore â†’ ai-service 
â†’ POST /api/v1/ai/generate-note â†’ Polling cada 2.5s 
â†’ COMPLETED â†’ Inyectar en editor
```

**Archivos clave:**
- UI: `AINoteModal.tsx`, `AIGenerationProgress.tsx`
- Estado: `AiGenerationStore.ts`
- Servicio: `ai-service.ts`
- Tipos: `ai-generation.ts`

---

#### 2ï¸âƒ£ EdiciÃ³n de Texto (Magic Write)
```
Usuario selecciona texto â†’ AIAssistantModal â†’ Elige acciÃ³n 
â†’ MagicWriteStore â†’ POST /api/v1/magic-write 
â†’ Response â†’ ComparaciÃ³n â†’ Aplicar cambios
```

**Archivos clave:**
- UI: `AIAssistantModal.tsx`, `TextComparisonView.tsx`
- Estado: `MagicWriteStore.ts`
- Tipos: `magic-write.ts` (19 acciones)

**Acciones disponibles:** CorrecciÃ³n, GeneraciÃ³n, OrganizaciÃ³n, TransformaciÃ³n, TÃ­tulos, TraducciÃ³n

---

#### 3ï¸âƒ£ GeneraciÃ³n de ImÃ¡genes
```
Usuario â†’ ImageAiGenerator â†’ Prompt + ResoluciÃ³n 
â†’ MediaAiStore â†’ POST /api/v1/media-ai/generate 
â†’ Polling progresivo â†’ COMPLETED + resultUrl â†’ Preview
```

**Archivos clave:**
- UI: `ImageAiGenerator.tsx`, `ImageCropDialog.tsx`
- Estado: `MediaAiStore.ts`
- Tipos: `media-ai.ts`

**Resoluciones:** Cuadrado (1:1), Retrato (9:16), Paisaje (16:9)

---

### Archivos CrÃ­ticos (Top 5)

1. **`axiosInstance.ts`** - Define TODOS los endpoints
2. **`ai-service.ts`** - LÃ³gica de polling para notas
3. **`AiGenerationStore.ts`** - Estado de generaciÃ³n de notas
4. **`MagicWriteStore.ts`** - Estado de ediciÃ³n de texto
5. **`MediaAiStore.ts`** - Estado de generaciÃ³n de imÃ¡genes

---

### EstadÃ­sticas

- **Total de archivos:** 31
- **LÃ­neas de cÃ³digo:** ~5,100
- **Componentes UI:** 13
- **Stores:** 3
- **Servicios:** 1
- **Endpoints:** 9
- **Tipos:** 3 archivos principales

---

## ğŸ¯ CASOS DE USO COMUNES

### Caso 1: "Quiero entender cÃ³mo funciona la generaciÃ³n de notas"

1. Lee: `AI_SYSTEM_INVENTORY.md` â†’ SecciÃ³n "GENERACIÃ“N DE NOTAS COMPLETAS CON IA"
2. Revisa: `AI_ARCHITECTURE_MAP.md` â†’ "FLUJO 1: GENERACIÃ“N DE NOTA CON IA"
3. Archivos a explorar:
   - `src/components/newsletter-note/ai-creation/AINoteModal.tsx`
   - `src/store/AiGenerationStore.ts`
   - `src/services/ai-service.ts`

---

### Caso 2: "Quiero cambiar los endpoints de IA"

1. Abre: `AI_MIGRATION_CHECKLIST.md` â†’ "CHECKLIST 2: CAMBIAR ENDPOINTS O URLS"
2. Sigue paso a paso
3. Archivos principales a modificar:
   - `src/global-config.ts` (URLs base)
   - `src/utils/axiosInstance.ts` (definiciÃ³n de endpoints)

---

### Caso 3: "Quiero aÃ±adir una nueva acciÃ³n de Magic Write"

1. Lee: `AI_SYSTEM_QUICK_REFERENCE.md` â†’ "2ï¸âƒ£ EDICIÃ“N DE TEXTO CON IA"
2. Archivos a modificar:
   - `src/types/magic-write.ts` â†’ AÃ±adir a `MagicWriteAction` y `AI_OPTIONS`
   - Backend â†’ Implementar nueva acciÃ³n
3. Componente UI ya estÃ¡ preparado (automÃ¡ticamente renderiza nuevas opciones)

---

### Caso 4: "Quiero debuggear un error en generaciÃ³n de imÃ¡genes"

1. Consulta: `AI_ARCHITECTURE_MAP.md` â†’ "FLUJO 3: GENERACIÃ“N DE IMAGEN CON IA"
2. Verifica:
   - Estado en DevTools â†’ Zustand store `media-ai-store`
   - Network tab â†’ Requests a `/api/v1/media-ai/*`
3. Logs clave:
   - `MediaAiStore.ts` â†’ Logs con emoji ğŸ¨
   - `ImageAiGenerator.tsx` â†’ Logs de polling

---

### Caso 5: "Quiero optimizar el tiempo de polling"

1. Abre: `AI_MIGRATION_CHECKLIST.md` â†’ "CHECKLIST 5: OPTIMIZAR POLLING"
2. Archivos a ajustar:
   - `src/services/ai-service.ts` â†’ `POLLING_CONFIG`
   - `src/components/.../ImageAiGenerator.tsx` â†’ `startPolling()` delays

---

## ğŸ”§ HERRAMIENTAS Y SCRIPTS

### Comandos Ãºtiles

```bash
# Buscar todos los componentes de IA
find src/components -name "*AI*.tsx" -o -name "*ai*.tsx"

# Buscar uso de un store
grep -r "useAiGenerationStore" src/

# Buscar todos los endpoints
grep -r "endpoints\." src/utils/axiosInstance.ts

# Contar LOC de stores
wc -l src/store/*AiStore.ts src/store/*WriteStore.ts
```

---

## ğŸ“‹ GLOSARIO RÃPIDO

| TÃ©rmino | Significado |
|---------|-------------|
| **objData** | Array de componentes para versiÃ³n newsletter (resumida) |
| **objDataWeb** | Array de componentes para versiÃ³n web (extendida) |
| **Polling** | Consulta periÃ³dica del estado de una tarea asÃ­ncrona |
| **Magic Write** | Sistema de ediciÃ³n de texto con IA (19 acciones) |
| **TaskStatus** | Estado de generaciÃ³n: PENDING â†’ GENERATING_X â†’ COMPLETED |
| **MediaAi** | Sistema de generaciÃ³n de medios (imÃ¡genes, videos, etc.) |
| **Resolution** | TamaÃ±o de imagen: cuadrado, retrato, paisaje |

---

## ğŸš¨ ADVERTENCIAS Y PRECAUCIONES

### âš ï¸ NO modificar sin checklist:
- `axiosInstance.ts` - Afecta TODAS las requests
- `global-config.ts` - Afecta URLs globales
- Stores - Afectan mÃºltiples componentes

### âš ï¸ Funcionalidades en desarrollo:
- `AINewsletterModal.tsx` - GeneraciÃ³n de newsletters completos (NO funcional)

### âš ï¸ Formato de datos:
- `objData` y `objDataWeb` vienen como **STRING JSON** del backend
- Deben parsearse con `JSON.parse()`
- Ver `ai-service.ts` â†’ `parseGeneratedContent()`

### âš ï¸ AutenticaciÃ³n:
- Todos los stores obtienen `userId` y `plan` de `AuthStore`
- Error 401 â†’ logout automÃ¡tico y redirecciÃ³n
- Timeout de requests: 80 segundos

---

## ğŸ“ SOPORTE Y AYUDA

### Tengo una pregunta sobre...

**...cÃ³mo funciona algo:**
â†’ `AI_SYSTEM_INVENTORY.md` (bÃºsqueda Ctrl+F)

**...quÃ© archivo modificar:**
â†’ `AI_FILES_INDEX.md` (bÃºsqueda por funcionalidad)

**...cÃ³mo hacer un cambio:**
â†’ `AI_MIGRATION_CHECKLIST.md` (busca el checklist apropiado)

**...cÃ³mo se conectan las piezas:**
â†’ `AI_ARCHITECTURE_MAP.md` (diagramas visuales)

**...consulta rÃ¡pida durante desarrollo:**
â†’ `AI_SYSTEM_QUICK_REFERENCE.md` (siempre abierto)

---

### Debugging

1. **Problema:** "No funciona la generaciÃ³n"
   - Verifica Network tab â†’ Â¿Llega el request?
   - Verifica DevTools â†’ Zustand store â†’ Â¿QuÃ© estado tiene?
   - Revisa console.log â†’ Â¿Hay errores?

2. **Problema:** "Polling no termina"
   - Verifica: Â¿Backend responde COMPLETED?
   - Verifica: Â¿maxAttempts alcanzado?
   - Revisa logs de polling en console

3. **Problema:** "Error 401"
   - Token expirado â†’ Relogin
   - Verifica: localStorage tiene 'AUTH_TOKEN'
   - Interceptor deberÃ­a redirigir automÃ¡ticamente

---

## ğŸ—ºï¸ ROADMAP FUTURO

### En Desarrollo
- [ ] GeneraciÃ³n de newsletters completos
- [ ] GeneraciÃ³n de videos con IA
- [ ] GeneraciÃ³n de GIFs animados

### Pendientes
- [ ] Historial de generaciones de notas
- [ ] Templates personalizados de prompts
- [ ] Fine-tuning de modelos
- [ ] A/B testing de prompts
- [ ] RegeneraciÃ³n parcial de secciones
- [ ] Sugerencias de mejora automÃ¡ticas

---

## ğŸ“ˆ MÃ‰TRICAS Y KPIs

### Performance
- **Tiempo promedio generaciÃ³n nota:** 2-3 minutos
- **Tiempo promedio generaciÃ³n imagen:** 10-30 segundos
- **Tiempo promedio Magic Write:** 5-15 segundos
- **Tasa de Ã©xito:** Monitorear en producciÃ³n

### Uso
- **Generaciones por dÃ­a:** TBD
- **AcciÃ³n mÃ¡s usada (Magic Write):** TBD
- **ResoluciÃ³n mÃ¡s usada (ImÃ¡genes):** TBD

---

## ğŸ“ RECURSOS ADICIONALES

### Enlaces Ãštiles
- [OpenAI API Docs](https://platform.openai.com/docs)
- [DALL-E API](https://platform.openai.com/docs/guides/images)
- [Zustand Docs](https://zustand-demo.pmnd.rs/)
- [Axios Docs](https://axios-http.com/docs/intro)

### Convenciones del CÃ³digo
- **Stores:** PascalCase, sufijo `Store.ts`
- **Componentes:** PascalCase, `.tsx`
- **Tipos:** kebab-case, `.ts`
- **Logs:** Usar emoji para fÃ¡cil identificaciÃ³n (ğŸš€, âœ…, âŒ, ğŸ“Š, etc.)

---

## âœ… CHECKLIST DE ONBOARDING

Para nuevos desarrolladores:

- [ ] Leer este README completo
- [ ] Leer `AI_SYSTEM_INVENTORY.md` (secciones relevantes)
- [ ] Explorar `AI_ARCHITECTURE_MAP.md` (entender flujos)
- [ ] Revisar cÃ³digo de un store (ej: `AiGenerationStore.ts`)
- [ ] Revisar cÃ³digo de un componente (ej: `AINoteModal.tsx`)
- [ ] Probar generar nota en local
- [ ] Probar editar texto con Magic Write
- [ ] Probar generar imagen
- [ ] Revisar Network tab durante uso
- [ ] Explorar Zustand DevTools durante uso
- [ ] Leer al menos 1 checklist de `AI_MIGRATION_CHECKLIST.md`

**Tiempo estimado:** 2-3 horas

---

## ğŸ“… HISTORIAL DE CAMBIOS

### 2025-11-10 - CreaciÃ³n de DocumentaciÃ³n Completa
- âœ… Creado sistema completo de documentaciÃ³n
- âœ… 5 documentos nuevos de referencia
- âœ… 4 documentos existentes organizados
- âœ… Checklists para 7 escenarios de cambios
- âœ… Ãndice completo de 31 archivos
- âœ… Diagramas de arquitectura y flujos

---

## ğŸ“œ LICENCIA Y CONTACTO

**Proyecto:** Adam Pro - Newsletter Editor con IA  
**OrganizaciÃ³n:** Neodaten  
**Fecha de documentaciÃ³n:** 2025-11-10  
**VersiÃ³n:** 1.0

---

<div align="center">

**Â¿Preguntas? Â¿Sugerencias?**

Actualiza la documentaciÃ³n si encuentras algo desactualizado o faltante.

---

*"Un sistema bien documentado es un sistema mantenible"*

</div>

